---
/**
 * ─── Página de detalle de estación — Baja California ───
 * Solo datos y rutas estáticas.
 * El diseño, HTML y CSS completos viven en DirectorioEstacionLayout.astro.
 */
import DirectorioEstacionLayout from "@layouts/DirectorioEstacionLayout.astro";
import {
  estacionesBajaCalifornia,
  getEstacionBySlug,
  getEstacionesCercanas,
  getMunicipios,
  getEstacionesByMunicipio,
  getEstadisticas,
} from "@data/estaciones-baja-california";

export function getStaticPaths() {
  return estacionesBajaCalifornia.map((estacion) => ({
    params: { slug: estacion.slug },
  }));
}

const { slug } = Astro.params;
const estacion  = getEstacionBySlug(slug as string);

if (!estacion) return Astro.redirect("/404");

const estadisticas              = getEstadisticas();
const estacionesCercanas        = getEstacionesCercanas(slug as string, 4);
const estacionesMismoMunicipio  = getEstacionesByMunicipio(estacion.municipio)
                                    .filter((e) => e.slug !== slug);
---

<DirectorioEstacionLayout
  estadoNombre="Baja California"
  estadoSlug="baja-california"
  estacion={estacion}
  estacionesMismoMunicipio={estacionesMismoMunicipio}
  estacionesCercanas={estacionesCercanas}
  totalEstacionesEstado={estadisticas.totalEstaciones}
  estadosVecinos={[
    { nombre: "Baja California Sur", slug: "baja-california-sur" },
    { nombre: "Sonora",              slug: "sonora"              },
    { nombre: "Aguascalientes",      slug: "aguascalientes"      },
    { nombre: "Ciudad de México",    slug: "ciudad-de-mexico"    },
    { nombre: "Jalisco",             slug: "jalisco"             },
  ]}
/>
