---
/**
 * ─── CategoryCard Component ───
 * ÚNICO componente de cards para todo el sitio BOMBERO.MX
 *
 * Props:
 * - title: Título de la card
 * - badge: Texto del badge (ej: "5 productos") - opcional
 * - items: Array de productos {label, href} - para cards con listado
 * - href: URL del botón CTA - opcional
 * - buttonText: Texto del botón - opcional
 * - icon: Nombre del icono para el placeholder
 * - image: URL de imagen (opcional)
 * - description: Texto descriptivo para cards informativas (sin lista ni botón)
 */

interface CardItem {
  label: string;
  href: string;
}

interface Props {
  title: string;
  badge?: string;
  items?: CardItem[];
  href?: string;
  buttonText?: string;
  icon?: string;
  image?: string;
  description?: string;
}

const {
  title,
  badge,
  items = [],
  href,
  buttonText,
  icon = "shield",
  image,
  description,
} = Astro.props;

const icons: Record<string, string> = {
  shield: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/></svg>`,
  helmet: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z"/><path d="M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5"/><path d="M4 15v-3a6 6 0 0 1 6-6h4a6 6 0 0 1 6 6v3"/></svg>`,
  boot: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M7 21h10"/><path d="M12 21V11"/><path d="M6 11V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v6"/><path d="M5 11h14l-2 10H7l-2-10z"/></svg>`,
  glove: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M18 11V6a2 2 0 0 0-2-2 2 2 0 0 0-2 2"/><path d="M14 10V4a2 2 0 0 0-2-2 2 2 0 0 0-2 2v2"/><path d="M10 10.5V6a2 2 0 0 0-2-2 2 2 0 0 0-2 2v8"/><path d="M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"/></svg>`,
  hood: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="8" r="5"/><path d="M3 21v-2a7 7 0 0 1 7-7h4a7 7 0 0 1 7 7v2"/></svg>`,
  goggles: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="6" cy="12" r="4"/><circle cx="18" cy="12" r="4"/><path d="M10 12h4"/><path d="M2 12h0"/><path d="M22 12h0"/></svg>`,
  certificate: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="8" r="6"/><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"/></svg>`,
  truck: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"/><path d="M15 18H9"/><path d="M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"/><circle cx="17" cy="18" r="2"/><circle cx="7" cy="18" r="2"/></svg>`,
  headphones: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3"/></svg>`,
  clock: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`,
  users: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>`,
};
---

<article class="category-card">
  <div class="category-card__image">
    {image ? (
      <img src={image} alt={title} loading="lazy" />
    ) : (
      <div class="category-card__placeholder">
        <Fragment set:html={icons[icon] || icons.shield} />
        <span>Imagen próximamente</span>
      </div>
    )}
    {badge && <span class="category-card__badge">{badge}</span>}
  </div>

  <div class="category-card__content">
    <h3 class="category-card__title">{title}</h3>

    {description && (
      <p class="category-card__description">{description}</p>
    )}

    {items.length > 0 && (
      <ul class="category-card__list">
        {items.map((item) => (
          <li>
            <a href={item.href}>{item.label}</a>
          </li>
        ))}
      </ul>
    )}

    {href && buttonText && (
      <a href={href} class="category-card__btn">
        <span>{buttonText}</span>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
    )}
  </div>
</article>

<style>
  /* ═══════════════════════════════════════════════════════════════════════
     CATEGORY CARD COMPONENT
     Único componente de cards para todo el sitio BOMBERO.MX
     ═══════════════════════════════════════════════════════════════════════ */

  .category-card {
    display: flex;
    flex-direction: column;
    background: white;
    border-radius: var(--radius-xl);
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 4px 12px rgba(0, 0, 0, 0.04);
  }

  /* ═══ Image ═══ */
  .category-card__image {
    position: relative;
    aspect-ratio: 4 / 3;
    background: linear-gradient(135deg, var(--color-smoke-100) 0%, var(--color-smoke-200) 100%);
    overflow: hidden;
  }

  .category-card__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .category-card__placeholder {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
  }

  .category-card__placeholder :global(svg) {
    width: 48px;
    height: 48px;
    stroke: var(--color-smoke-400);
    opacity: 0.6;
  }

  .category-card__placeholder span {
    font-size: var(--text-xs);
    color: var(--color-smoke-400);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .category-card__badge {
    position: absolute;
    top: var(--space-4);
    right: var(--space-4);
    background: var(--color-fire-600);
    color: white;
    font-size: 11px;
    font-weight: 700;
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-full);
    text-transform: uppercase;
    letter-spacing: 0.02em;
  }

  /* ═══ Content ═══ */
  .category-card__content {
    display: flex;
    flex-direction: column;
    padding: var(--space-6);
    flex-grow: 1;
  }

  .category-card__title {
    font-size: var(--text-xl);
    font-weight: 800;
    color: var(--color-smoke-900);
    margin: 0 0 var(--space-4);
    line-height: 1.2;
  }

  .category-card__description {
    font-size: var(--text-sm);
    color: var(--color-smoke-600);
    line-height: 1.7;
    margin: 0;
  }

  /* ═══ List ═══ */
  .category-card__list {
    list-style: none;
    padding: 0;
    margin: 0 0 var(--space-5);
    flex-grow: 1;
  }

  .category-card__list li {
    padding: var(--space-2) 0;
    border-bottom: 1px solid var(--color-smoke-100);
  }

  .category-card__list li:last-child {
    border-bottom: none;
  }

  .category-card__list a {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    color: var(--color-smoke-600);
    text-decoration: none;
    font-size: var(--text-sm);
    font-weight: 500;
  }

  .category-card__list a::before {
    content: '';
    width: 6px;
    height: 6px;
    background: var(--color-fire-500);
    border-radius: 50%;
    flex-shrink: 0;
  }


  /* ═══ Button ═══ */
  .category-card__btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-4) var(--space-5);
    background: var(--color-fire-600);
    color: white;
    text-decoration: none;
    font-size: var(--text-sm);
    font-weight: 600;
    border-radius: var(--radius-lg);
    margin-top: auto;
    transition: all var(--transition-fast);
  }

  .category-card__btn:hover {
    background: var(--color-fire-700);
  }

  .category-card__btn svg {
    flex-shrink: 0;
    transition: transform var(--transition-fast);
  }

  .category-card__btn:hover svg {
    transform: translateX(3px);
  }

  /* ═══ Responsive ═══ */
  @media (max-width: 768px) {
    .category-card__content {
      padding: var(--space-5);
    }

    .category-card__title {
      font-size: var(--text-lg);
    }

    .category-card__list a {
      font-size: var(--text-xs);
    }
  }
</style>
