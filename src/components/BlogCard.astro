---
/**
 * ─── BlogCard Component ───
 * Card for displaying blog post previews in grids.
 */
import { formatDate, readingTime } from "@utils/helpers";

type Props = {
  title: string;
  description: string;
  slug: string;
  date: Date;
  image?: string;
  body?: string;
};

const { title, description, slug, date, image, body } = Astro.props;
const minutes = body ? readingTime(body) : undefined;
---

<article class="blog-card">
  <a href={`/blog/${slug}`} class="blog-card__link">
    {image && (
      <img
        src={image}
        alt=""
        class="blog-card__image"
        loading="lazy"
        width="400"
        height="225"
      />
    )}
    <div class="blog-card__body">
      <h3 class="blog-card__title">{title}</h3>
      <p class="blog-card__description">{description}</p>
      <div class="blog-card__meta">
        <time datetime={date.toISOString()}>{formatDate(date)}</time>
        {minutes && <span>{minutes} min de lectura</span>}
      </div>
    </div>
  </a>
</article>

<style>
  .blog-card {
    border-radius: var(--radius-md);
    overflow: hidden;
    background: var(--color-bg);
    border: 1px solid var(--color-border-light);
  }

  .blog-card__link {
    text-decoration: none;
    color: inherit;
    display: flex;
    flex-direction: column;
  }

  .blog-card__image {
    width: 100%;
    aspect-ratio: 16 / 9;
    object-fit: cover;
  }

  .blog-card__body {
    padding: var(--space-lg);
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
  }

  .blog-card__title {
    font-size: var(--text-lg);
    color: var(--color-primary);
    line-height: 1.3;
  }

  .blog-card__description {
    font-size: var(--text-sm);
    color: var(--color-text-light);
    line-height: 1.5;
  }

  .blog-card__meta {
    display: flex;
    gap: var(--space-md);
    font-size: var(--text-xs);
    color: var(--color-text-light);
    margin-block-start: auto;
    padding-block-start: var(--space-sm);
  }
</style>
