---
/**
 * ─── StationCard Component ───
 * Card profesional para estaciones de bomberos
 * Diseño inspirado en CategoryCard con link a página de detalle
 *
 * Props:
 * - nombre: Nombre de la estación
 * - slug: URL slug para la página de detalle
 * - direccion: Dirección física
 * - alcaldia: Alcaldía/Municipio
 * - telefono: Teléfono de contacto
 * - servicios: Array de servicios que ofrece
 * - horario: Horario de servicio (ej: "24 horas")
 * - image: URL de imagen (opcional)
 */

interface Props {
  nombre?: string;
  slug: string;
  direccion: string;
  alcaldia?: string;
  telefono: string;
  servicios: string[];
  horario?: string;
  image?: string;
  baseUrl?: string;
  href?: string;
}

const {
  nombre,
  slug,
  direccion,
  alcaldia,
  telefono,
  servicios,
  horario = "24 horas",
  image,
  baseUrl = "/directorio/ciudad-de-mexico",
  href,
} = Astro.props;

// URL de la página de detalle (acepta slug absoluto o relativo)
const cleanBaseUrl = baseUrl.endsWith("/") ? baseUrl.slice(0, -1) : baseUrl;
const detalleUrl = href ?? (slug.startsWith("/") ? slug : `${cleanBaseUrl}/${slug}`);
const nombreEstacion = nombre ?? "Estación de Bomberos";
const zona = alcaldia ?? "Cobertura local";
---

<article class="station-card">
  <!-- Image Section -->
  <a href={detalleUrl} class="station-card__image">
    {image ? (
      <img src={image} alt={nombreEstacion} loading="lazy" />
    ) : (
      <div class="station-card__placeholder">
        <div class="station-card__icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M3 21h18"/>
            <path d="M5 21V7l8-4 8 4v14"/>
            <path d="M9 21v-4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v4"/>
            <path d="M10 9h4"/>
            <path d="M12 9v3"/>
          </svg>
        </div>
        <span>Estación de Bomberos</span>
      </div>
    )}
    <span class="station-card__badge">{horario}</span>
    <span class="station-card__alcaldia">{zona}</span>
  </a>

  <!-- Content Section -->
  <div class="station-card__content">
    <h3 class="station-card__title">{nombreEstacion}</h3>

    <!-- Info List -->
    <ul class="station-card__info">
      <li class="station-card__info-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
          <circle cx="12" cy="10" r="3"/>
        </svg>
        <span>{direccion}</span>
      </li>
      <li class="station-card__info-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72"/>
        </svg>
        <span>{telefono}</span>
      </li>
    </ul>

    <!-- Services Preview -->
    <div class="station-card__services">
      <span class="station-card__services-label">Servicios:</span>
      <ul class="station-card__services-list">
        {servicios.slice(0, 3).map((servicio) => (
          <li>{servicio}</li>
        ))}
        {servicios.length > 3 && (
          <li class="station-card__services-more">+{servicios.length - 3} más</li>
        )}
      </ul>
    </div>

    <!-- Single CTA Button -->
    <a href={detalleUrl} class="station-card__btn">
      <span>{nombreEstacion}</span>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <path d="M5 12h14M12 5l7 7-7 7"/>
      </svg>
    </a>
  </div>
</article>

<style>
  /* ═══════════════════════════════════════════════════════════════════════
     STATION CARD COMPONENT
     Card profesional para estaciones de bomberos
     ═══════════════════════════════════════════════════════════════════════ */

  .station-card {
    display: flex;
    flex-direction: column;
    background: white;
    border-radius: var(--radius-xl);
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 4px 12px rgba(0, 0, 0, 0.04);
  }

  /* ═══ Image Section ═══ */
  .station-card__image {
    position: relative;
    aspect-ratio: 16 / 10;
    background: linear-gradient(135deg, var(--color-smoke-800) 0%, var(--color-smoke-900) 100%);
    overflow: hidden;
    display: block;
    text-decoration: none;
  }

  .station-card__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .station-card__placeholder {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    background:
      radial-gradient(ellipse 80% 50% at 50% 0%, rgba(220, 38, 38, 0.15), transparent),
      radial-gradient(ellipse 60% 40% at 0% 100%, rgba(249, 115, 22, 0.1), transparent),
      linear-gradient(135deg, var(--color-smoke-800) 0%, var(--color-smoke-900) 100%);
  }

  .station-card__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 72px;
    height: 72px;
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-2xl);
    backdrop-filter: blur(8px);
  }

  .station-card__icon svg {
    width: 36px;
    height: 36px;
    stroke: var(--color-fire-400);
  }

  .station-card__placeholder > span {
    font-size: var(--text-xs);
    color: var(--color-smoke-400);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  .station-card__badge {
    position: absolute;
    top: var(--space-4);
    right: var(--space-4);
    background: linear-gradient(135deg, var(--color-fire-500) 0%, var(--color-ember-500) 100%);
    color: white;
    font-size: 11px;
    font-weight: 700;
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-full);
    text-transform: uppercase;
    letter-spacing: 0.02em;
    box-shadow: 0 2px 8px rgba(220, 38, 38, 0.4);
  }

  .station-card__alcaldia {
    position: absolute;
    bottom: var(--space-4);
    left: var(--space-4);
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(8px);
    color: white;
    font-size: 11px;
    font-weight: 600;
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-md);
    letter-spacing: 0.02em;
  }

  /* ═══ Content Section ═══ */
  .station-card__content {
    display: flex;
    flex-direction: column;
    padding: var(--space-6);
    flex-grow: 1;
  }

  .station-card__title {
    font-size: var(--text-lg);
    font-weight: 800;
    color: var(--color-smoke-900);
    margin: 0 0 var(--space-4);
    line-height: 1.3;
  }

  /* ═══ Info List ═══ */
  .station-card__info {
    list-style: none;
    padding: 0;
    margin: 0 0 var(--space-4);
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  .station-card__info-item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    font-size: var(--text-sm);
    color: var(--color-smoke-600);
    line-height: 1.5;
  }

  .station-card__info-item svg {
    width: 16px;
    height: 16px;
    color: var(--color-fire-500);
    flex-shrink: 0;
    margin-top: 2px;
  }

  /* ═══ Services ═══ */
  .station-card__services {
    padding-top: var(--space-4);
    border-top: 1px solid var(--color-smoke-100);
    margin-bottom: var(--space-5);
    flex-grow: 1;
  }

  .station-card__services-label {
    display: block;
    font-size: var(--text-xs);
    font-weight: 700;
    color: var(--color-smoke-500);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: var(--space-2);
  }

  .station-card__services-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }

  .station-card__services-list li {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--color-smoke-600);
    padding: var(--space-1) 0;
  }

  .station-card__services-list li::before {
    content: '';
    width: 6px;
    height: 6px;
    background: var(--color-fire-500);
    border-radius: 50%;
    flex-shrink: 0;
  }

  .station-card__services-more {
    font-weight: 600;
    color: var(--color-fire-600) !important;
  }

  .station-card__services-more::before {
    background: var(--color-fire-600) !important;
  }

  /* ═══ CTA Button ═══ */
  .station-card__btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-4);
    background: var(--color-fire-600);
    color: white;
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    font-weight: 700;
    text-decoration: none;
    margin-top: auto;
    transition: all 0.2s ease;
  }

  .station-card__btn:hover {
    background: var(--color-fire-700);
  }

  .station-card__btn svg {
    flex-shrink: 0;
    transition: transform 0.2s ease;
  }

  .station-card__btn:hover svg {
    transform: translateX(4px);
  }

  /* ═══ Responsive ═══ */
  @media (max-width: 768px) {
    .station-card__content {
      padding: var(--space-5);
    }

    .station-card__title {
      font-size: var(--text-base);
    }

    .station-card__info-item {
      font-size: var(--text-xs);
    }

    .station-card__services-list li {
      font-size: var(--text-xs);
    }

    .station-card__btn {
      padding: var(--space-3);
    }
  }

  @media (max-width: 480px) {
    .station-card__image {
      aspect-ratio: 16 / 9;
    }

    .station-card__icon {
      width: 56px;
      height: 56px;
    }

    .station-card__icon svg {
      width: 28px;
      height: 28px;
    }
  }
</style>
