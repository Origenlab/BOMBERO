---
/**
 * ─── Card Component ───
 * Tarjeta reutilizable con múltiples variantes.
 *
 * Props:
 * - variant: "default" | "elevated" | "bordered" | "gradient" | "dark"
 * - href: URL para enlace
 * - padding: "sm" | "md" | "lg" | "none"
 * - hover: boolean (efecto hover)
 * - image: string (imagen de cabecera)
 * - imageAlt: string
 * - aspectRatio: "auto" | "square" | "video" | "portrait"
 */

interface Props {
  variant?: "default" | "elevated" | "bordered" | "gradient" | "dark";
  href?: string;
  padding?: "sm" | "md" | "lg" | "none";
  hover?: boolean;
  image?: string;
  imageAlt?: string;
  aspectRatio?: "auto" | "square" | "video" | "portrait";
  class?: string;
}

const {
  variant = "default",
  href,
  padding = "md",
  hover = true,
  image,
  imageAlt = "",
  aspectRatio = "auto",
  class: className = "",
} = Astro.props;

const isLink = !!href;
const Tag = isLink ? "a" : "div";

const cardClasses = [
  "card",
  `card--${variant}`,
  `card--padding-${padding}`,
  hover && "card--hover",
  isLink && "card--clickable",
  className,
].filter(Boolean).join(" ");

const imageClasses = [
  "card__image-wrapper",
  `card__image-wrapper--${aspectRatio}`,
].join(" ");
---

<Tag class={cardClasses} href={href}>
  {image && (
    <div class={imageClasses}>
      <img
        src={image}
        alt={imageAlt}
        class="card__image"
        loading="lazy"
        decoding="async"
      />
    </div>
  )}
  <div class="card__content">
    <slot />
  </div>
</Tag>

<style>
  /* ═══════════════════════════════════════════════════════════════════════
     CARD COMPONENT
     ═══════════════════════════════════════════════════════════════════════ */

  .card {
    display: flex;
    flex-direction: column;
    background: white;
    border-radius: var(--radius-xl);
    overflow: hidden;
    transition: all var(--transition-base);
  }

  .card--clickable {
    text-decoration: none;
    color: inherit;
    cursor: pointer;
  }

  /* ═══ Variants ═══ */
  .card--default {
    background: white;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  }

  .card--elevated {
    background: white;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  }

  .card--bordered {
    background: white;
    border: 1px solid var(--color-border);
  }

  .card--gradient {
    background: linear-gradient(135deg, var(--color-smoke-50) 0%, white 100%);
    border: 1px solid var(--color-border-light);
  }

  .card--dark {
    background: var(--color-smoke-800);
    color: white;
  }

  /* ═══ Hover Effects ═══ */
  .card--hover:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
  }

  .card--hover.card--bordered:hover {
    border-color: var(--color-fire-300);
  }

  .card--hover.card--dark:hover {
    background: var(--color-smoke-700);
  }

  /* ═══ Padding ═══ */
  .card--padding-none .card__content {
    padding: 0;
  }

  .card--padding-sm .card__content {
    padding: var(--space-4);
  }

  .card--padding-md .card__content {
    padding: var(--space-6);
  }

  .card--padding-lg .card__content {
    padding: var(--space-8);
  }

  /* ═══ Image ═══ */
  .card__image-wrapper {
    position: relative;
    overflow: hidden;
    background: var(--color-smoke-100);
  }

  .card__image-wrapper--auto {
    aspect-ratio: auto;
  }

  .card__image-wrapper--square {
    aspect-ratio: 1 / 1;
  }

  .card__image-wrapper--video {
    aspect-ratio: 16 / 9;
  }

  .card__image-wrapper--portrait {
    aspect-ratio: 3 / 4;
  }

  .card__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--transition-base);
  }

  .card--hover:hover .card__image {
    transform: scale(1.05);
  }

  /* ═══ Content ═══ */
  .card__content {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  /* ═══ Focus ═══ */
  .card--clickable:focus-visible {
    outline: 2px solid var(--color-fire-500);
    outline-offset: 2px;
  }
</style>
