---
/**
 * ─── QuoteForm Component ───
 * Formulario de cotización para BOMBERO.MX
 * Sección con formulario + beneficios + CTA WhatsApp
 */

const equipmentTypes = [
  "Trajes estructurales",
  "Trajes forestales",
  "Cascos",
  "Botas",
  "Guantes",
  "Equipos SCBA",
  "Herramientas de rescate",
  "Equipos de altura",
  "Cámaras térmicas",
  "Detectores de gases",
  "Linternas y luces",
  "Otro equipo",
];

const benefits = [
  {
    icon: "clock",
    text: "Respuesta en menos de 24 horas",
  },
  {
    icon: "check",
    text: "Asesoría técnica sin costo",
  },
  {
    icon: "truck",
    text: "Precios competitivos y envío a todo México",
  },
];

const icons: Record<string, string> = {
  clock: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`,
  check: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 12l2 2 4-4"/><circle cx="12" cy="12" r="10"/></svg>`,
  truck: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"/><path d="M15 18H9"/><path d="M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"/><circle cx="17" cy="18" r="2"/><circle cx="7" cy="18" r="2"/></svg>`,
};
---

<section class="quote-form" id="cotizar">
  <div class="quote-form__bg"></div>
  <div class="container">
    <div class="quote-form__wrapper">
      <!-- Form Side -->
      <div class="quote-form__content">
        <div class="quote-form__header">
          <h2 class="quote-form__title">
            Cotiza tu Equipo para Bomberos <span class="text-gradient">en Minutos</span>
          </h2>
          <ul class="quote-form__benefits">
            {benefits.map((benefit) => (
              <li class="quote-form__benefit">
                <span class="quote-form__benefit-icon" set:html={icons[benefit.icon]} />
                <span>{benefit.text}</span>
              </li>
            ))}
          </ul>
        </div>

        <form class="quote-form__form" action="/api/quote" method="POST" id="quoteForm">
          <div class="quote-form__row">
            <div class="quote-form__field">
              <label for="name" class="quote-form__label">Nombre completo</label>
              <input
                type="text"
                id="name"
                name="name"
                required
                placeholder="Tu nombre"
                class="quote-form__input"
              />
            </div>
            <div class="quote-form__field">
              <label for="contact" class="quote-form__label">Teléfono o Email</label>
              <input
                type="text"
                id="contact"
                name="contact"
                required
                placeholder="55 1234 5678 o tu@email.com"
                class="quote-form__input"
              />
            </div>
          </div>

          <div class="quote-form__field">
            <label for="institution" class="quote-form__label">Institución / Empresa</label>
            <input
              type="text"
              id="institution"
              name="institution"
              placeholder="Ej: H. Cuerpo de Bomberos de..."
              class="quote-form__input"
            />
          </div>

          <div class="quote-form__field">
            <label for="equipment" class="quote-form__label">Tipo de equipo</label>
            <select id="equipment" name="equipment" required class="quote-form__select">
              <option value="">Selecciona el equipo que necesitas</option>
              {equipmentTypes.map((type) => (
                <option value={type}>{type}</option>
              ))}
            </select>
          </div>

          <div class="quote-form__field">
            <label for="message" class="quote-form__label">Detalles del equipo (opcional)</label>
            <textarea
              id="message"
              name="message"
              rows="3"
              placeholder="Especifica cantidades, tallas, modelos o cualquier detalle adicional..."
              class="quote-form__textarea"
            ></textarea>
          </div>

          <div class="quote-form__actions">
            <button type="submit" class="quote-form__submit">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect width="20" height="16" x="2" y="4" rx="2"/>
                <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
              </svg>
              Solicitar Cotización
            </button>
            <span class="quote-form__divider">o</span>
            <a href="https://wa.me/5215512345678?text=Hola%2C%20me%20interesa%20cotizar%20equipo%20para%20bomberos" target="_blank" rel="noopener" class="quote-form__whatsapp">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
              </svg>
              Enviar por WhatsApp
            </a>
          </div>

          <p class="quote-form__disclaimer">
            Sin compromiso · Atención personalizada · Te respondemos al instante
          </p>
        </form>
      </div>

      <!-- Info Side -->
      <div class="quote-form__info">
        <div class="quote-form__info-card">
          <div class="quote-form__info-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
            </svg>
          </div>
          <h3>También puedes llamarnos</h3>
          <a href="tel:+525512345678" class="quote-form__phone">55 1234 5678</a>
          <p>Lunes a Viernes: 9:00 - 18:00</p>
        </div>

        <div class="quote-form__info-card quote-form__info-card--accent">
          <h3>Protege a tu equipo con los mejores</h3>
          <p>Equipo de protección personal certificado NFPA para bomberos en toda la República Mexicana.</p>
          <a href="/productos" class="quote-form__catalog-btn">
            Ver catálogo completo
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </a>
        </div>

        <div class="quote-form__trust">
          <span>Certificaciones:</span>
          <div class="quote-form__badges">
            <span class="quote-form__badge">NFPA</span>
            <span class="quote-form__badge">UL</span>
            <span class="quote-form__badge">NOM</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* ═══════════════════════════════════════════════════════════════════════
     QUOTE FORM COMPONENT
     ═══════════════════════════════════════════════════════════════════════ */

  .quote-form {
    position: relative;
    padding: var(--space-20) 0;
    background: var(--color-smoke-950);
    overflow: hidden;
  }

  .quote-form__bg {
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse 60% 50% at 20% 50%, rgba(220, 38, 38, 0.15), transparent),
      radial-gradient(ellipse 40% 40% at 80% 20%, rgba(249, 115, 22, 0.1), transparent);
    pointer-events: none;
  }

  .quote-form__wrapper {
    position: relative;
    display: grid;
    grid-template-columns: 1.2fr 0.8fr;
    gap: var(--space-12);
    align-items: start;
  }

  /* ═══ Form Content ═══ */
  .quote-form__content {
    background: white;
    border-radius: var(--radius-3xl);
    padding: var(--space-10);
  }

  .quote-form__header {
    margin-bottom: var(--space-8);
  }

  .quote-form__title {
    font-size: clamp(1.5rem, 3vw, 2rem);
    font-weight: 800;
    color: var(--color-smoke-900);
    line-height: 1.2;
    margin-bottom: var(--space-5);
  }

  .quote-form__benefits {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-4);
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .quote-form__benefit {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--color-smoke-600);
  }

  .quote-form__benefit-icon {
    width: 20px;
    height: 20px;
    color: var(--color-fire-600);
  }

  .quote-form__benefit-icon :global(svg) {
    width: 100%;
    height: 100%;
  }

  /* ═══ Form Fields ═══ */
  .quote-form__form {
    display: flex;
    flex-direction: column;
    gap: var(--space-5);
  }

  .quote-form__row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-5);
  }

  .quote-form__field {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
  }

  .quote-form__label {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--color-smoke-700);
  }

  .quote-form__input,
  .quote-form__select,
  .quote-form__textarea {
    padding: var(--space-4);
    background: var(--color-smoke-50);
    border: 2px solid transparent;
    border-radius: var(--radius-lg);
    font-size: var(--text-base);
    color: var(--color-smoke-900);
    transition: all var(--transition-fast);
  }

  .quote-form__input::placeholder,
  .quote-form__textarea::placeholder {
    color: var(--color-smoke-400);
  }

  .quote-form__input:focus,
  .quote-form__select:focus,
  .quote-form__textarea:focus {
    outline: none;
    background: white;
    border-color: var(--color-fire-500);
    box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.1);
  }

  .quote-form__select {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right var(--space-4) center;
    padding-right: var(--space-12);
  }

  .quote-form__textarea {
    resize: vertical;
    min-height: 100px;
  }

  /* ═══ Actions ═══ */
  .quote-form__actions {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    margin-top: var(--space-3);
  }

  .quote-form__submit {
    flex: 1;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    padding: var(--space-5) var(--space-8);
    background: var(--gradient-fire);
    color: white;
    font-size: var(--text-base);
    font-weight: 700;
    border: none;
    border-radius: var(--radius-xl);
    cursor: pointer;
    transition: all var(--transition-base);
  }

  .quote-form__submit:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(220, 38, 38, 0.35);
  }

  .quote-form__submit svg {
    width: 20px;
    height: 20px;
  }

  .quote-form__divider {
    font-size: var(--text-sm);
    color: var(--color-smoke-400);
  }

  .quote-form__whatsapp {
    flex: 1;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    padding: var(--space-5) var(--space-8);
    background: #25D366;
    color: white;
    font-size: var(--text-base);
    font-weight: 700;
    text-decoration: none;
    border-radius: var(--radius-xl);
    transition: all var(--transition-base);
  }

  .quote-form__whatsapp:hover {
    background: #128C7E;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(37, 211, 102, 0.35);
  }

  .quote-form__whatsapp svg {
    width: 20px;
    height: 20px;
  }

  .quote-form__disclaimer {
    text-align: center;
    font-size: var(--text-xs);
    color: var(--color-smoke-500);
    margin-top: var(--space-4);
  }

  /* ═══ Info Side ═══ */
  .quote-form__info {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
  }

  .quote-form__info-card {
    padding: var(--space-8);
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: var(--radius-2xl);
    text-align: center;
  }

  .quote-form__info-icon {
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto var(--space-4);
    background: var(--gradient-fire);
    border-radius: var(--radius-xl);
    color: white;
  }

  .quote-form__info-icon svg {
    width: 28px;
    height: 28px;
  }

  .quote-form__info-card h3 {
    font-size: var(--text-lg);
    font-weight: 700;
    color: white;
    margin-bottom: var(--space-3);
  }

  .quote-form__info-card p {
    font-size: var(--text-sm);
    color: var(--color-smoke-400);
    line-height: 1.6;
  }

  .quote-form__phone {
    display: block;
    font-size: var(--text-2xl);
    font-weight: 800;
    color: var(--color-fire-400);
    text-decoration: none;
    margin-bottom: var(--space-2);
  }

  .quote-form__phone:hover {
    color: var(--color-fire-300);
  }

  .quote-form__info-card--accent {
    background: linear-gradient(135deg, rgba(220, 38, 38, 0.2) 0%, rgba(249, 115, 22, 0.1) 100%);
    border-color: rgba(220, 38, 38, 0.3);
  }

  .quote-form__catalog-btn {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    margin-top: var(--space-5);
    padding: var(--space-3) var(--space-6);
    background: white;
    color: var(--color-fire-600);
    font-size: var(--text-sm);
    font-weight: 700;
    text-decoration: none;
    border-radius: var(--radius-lg);
    transition: all var(--transition-fast);
  }

  .quote-form__catalog-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  }

  .quote-form__catalog-btn svg {
    width: 16px;
    height: 16px;
  }

  .quote-form__trust {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-4);
    padding: var(--space-5);
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--radius-xl);
  }

  .quote-form__trust span {
    font-size: var(--text-xs);
    color: var(--color-smoke-500);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .quote-form__badges {
    display: flex;
    gap: var(--space-2);
  }

  .quote-form__badge {
    padding: var(--space-1) var(--space-3);
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-md);
    font-size: 11px;
    font-weight: 700;
    color: var(--color-smoke-300);
  }

  /* ═══ Responsive ═══ */
  @media (max-width: 1024px) {
    .quote-form__wrapper {
      grid-template-columns: 1fr;
    }

    .quote-form__info {
      flex-direction: row;
      flex-wrap: wrap;
    }

    .quote-form__info-card {
      flex: 1 1 200px;
    }

    .quote-form__trust {
      flex: 1 1 100%;
    }
  }

  @media (max-width: 768px) {
    .quote-form {
      padding: var(--space-16) 0;
    }

    .quote-form__content {
      padding: var(--space-8);
    }

    .quote-form__row {
      grid-template-columns: 1fr;
    }

    .quote-form__actions {
      flex-direction: column;
    }

    .quote-form__submit,
    .quote-form__whatsapp {
      width: 100%;
    }

    .quote-form__divider {
      display: none;
    }

    .quote-form__info {
      flex-direction: column;
    }

    .quote-form__info-card {
      flex: none;
    }
  }

  @media (max-width: 480px) {
    .quote-form__content {
      padding: var(--space-6);
    }

    .quote-form__title {
      font-size: var(--text-xl);
    }

    .quote-form__benefits {
      flex-direction: column;
      gap: var(--space-2);
    }
  }
</style>
