---
/**
 * ─── BlogLayout ───
 * Layout reutilizable para TODAS las páginas del blog.
 * Contiene toda la estructura HTML y CSS.
 * Los archivos de artículos solo necesitan pasar datos como props — cero CSS.
 *
 * Secciones incluidas:
 *  1. Breadcrumb
 *  2. Hero (badge + título + extracto)
 *  3. Layout principal (main + sidebar)
 *     3a. Contenido del artículo (slot)
 *     3b. Autor y etiquetas
 *  4. Sidebar con enlaces relacionados
 *  5. Artículos relacionados
 *  6. CTABanner
 */
import PageLayout from "@layouts/PageLayout.astro";
import Breadcrumb from "@components/Breadcrumb.astro";
import SectionHeader from "@components/SectionHeader.astro";
import CTABanner from "@components/CTABanner.astro";
import { cdnW } from "@utils/cdn";

/* ── Tipos ─────────────────────────────────────────────────────────────── */
interface BreadcrumbItem {
  label: string;
  href?: string;
}

interface SidebarLinkItem {
  label: string;
  href: string;
}

interface CategoriaItem {
  label: string;
  href: string;
  count?: number;
}

interface ArticuloRelacionado {
  title: string;
  excerpt: string;
  href: string;
  image: string;
  categoria?: string;
}

interface Props {
  /* SEO */
  title: string;
  description: string;
  keywords?: string[];
  canonical: string;
  image?: string;

  /* Breadcrumb */
  breadcrumb: BreadcrumbItem[];

  /* Hero */
  heroBadge: string;
  heroTitle: string;
  heroExcerpt: string;
  heroImage?: string;

  /* Autor (opcional) */
  autor?: string;
  autorRol?: string;

  /* Tags/Etiquetas */
  tags?: string[];

  /* Sidebar */
  categorias?: CategoriaItem[];
  articulosPopulares?: SidebarLinkItem[];
  productosRelacionados?: SidebarLinkItem[];
  directorioLinks?: SidebarLinkItem[];

  /* Artículos relacionados (footer) */
  relacionados?: ArticuloRelacionado[];
}

const {
  title, description, keywords, canonical, image,
  breadcrumb,
  heroBadge, heroTitle, heroExcerpt, heroImage,
  autor, autorRol,
  tags = [],
  categorias = [],
  articulosPopulares = [],
  productosRelacionados = [],
  directorioLinks = [],
  relacionados = [],
} = Astro.props;

const heroImageCdn = heroImage ? cdnW(heroImage, 800) : undefined;
const relacionadosCdn = relacionados.map(r => ({ ...r, image: cdnW(r.image, 400) }));
---

<PageLayout
  title={title}
  description={description}
  keywords={keywords}
  canonical={canonical}
  image={image}
>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- BREADCRUMB                                                       -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <Breadcrumb items={breadcrumb} />

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- HERO                                                             -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <section class="blog-hero">
    <div class="blog-hero__bg">
      <div class="blog-hero__gradient"></div>
      <div class="blog-hero__grid"></div>
      <div class="blog-hero__glow blog-hero__glow--1"></div>
      <div class="blog-hero__glow blog-hero__glow--2"></div>
    </div>

    <div class="container blog-hero__container">
      <div class="blog-hero__content">
        <div class="blog-hero__badge">
          <span class="blog-hero__badge-dot"></span>
          {heroBadge}
        </div>
        <h1 class="blog-hero__title">{heroTitle}</h1>
        <p class="blog-hero__excerpt">{heroExcerpt}</p>
        {tags.length > 0 && (
          <div class="blog-hero__tags">
            {tags.map((tag) => (
              <span class="blog-hero__tag">{tag}</span>
            ))}
          </div>
        )}
      </div>

      {heroImageCdn && (
        <div class="blog-hero__image-wrap">
          <img
            src={heroImageCdn}
            alt={heroTitle}
            class="blog-hero__image"
            width="800"
            height="450"
            loading="eager"
          />
        </div>
      )}
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- LAYOUT PRINCIPAL — CONTENIDO + SIDEBAR                          -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <div class="blog-layout">
    <div class="container blog-layout__inner">

      <!-- ─── COLUMNA PRINCIPAL ─── -->
      <main class="blog-main">

        <!-- CONTENIDO DEL ARTÍCULO -->
        <article class="blog-article">
          <div class="blog-article__content prose">
            <slot />
          </div>

          {(autor || tags.length > 0) && (
            <footer class="blog-article__footer">
              {autor && (
                <div class="blog-article__autor">
                  <div class="blog-article__autor-avatar">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                      <circle cx="12" cy="7" r="4"/>
                    </svg>
                  </div>
                  <div class="blog-article__autor-info">
                    <p class="blog-article__autor-name">{autor}</p>
                    {autorRol && <p class="blog-article__autor-rol">{autorRol}</p>}
                  </div>
                </div>
              )}
              {tags.length > 0 && (
                <div class="blog-article__tags">
                  <span class="blog-article__tags-label">Etiquetas:</span>
                  <div class="blog-article__tags-list">
                    {tags.map((tag) => (
                      <span class="blog-article__tag">{tag}</span>
                    ))}
                  </div>
                </div>
              )}
            </footer>
          )}
        </article>

        <!-- CTA DENTRO DEL ARTÍCULO -->
        <div class="blog-cta-inline">
          <div class="blog-cta-inline__icon">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
            </svg>
          </div>
          <div class="blog-cta-inline__content">
            <h3>¿Necesitas equipo certificado?</h3>
            <p>Cotiza sin compromiso equipo NFPA para tu estación o brigada industrial.</p>
          </div>
          <a href="/cotizar" class="blog-cta-inline__btn">Solicitar Cotización</a>
        </div>

      </main>

      <!-- ─── SIDEBAR ─── -->
      <aside class="blog-sidebar">

        <!-- CTA COTIZAR -->
        <div class="sb-card sb-card--cta">
          <h3 class="sb-card__title">Catálogo Completo</h3>
          <p class="sb-card__text">Equipo certificado NFPA listo para envío a toda la República.</p>
          <a href="/productos" class="sb-cta-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/></svg>
            Ver Productos
          </a>
          <div class="sb-card__contacts">
            <a href="https://wa.me/525520780102" target="_blank" rel="noopener noreferrer" class="sb-contact sb-contact--wa">
              <svg width="15" height="15" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"/></svg>
              WhatsApp
            </a>
            <a href="tel:+525520780102" class="sb-contact">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07A19.5 19.5 0 0 1 4.69 12a19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 3.6 1.27h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L7.91 8.86a16 16 0 0 0 6.07 6.07l.95-.95a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
              55 2078 0102
            </a>
          </div>
        </div>

        <!-- CATEGORÍAS -->
        {categorias.length > 0 && (
          <div class="sb-card">
            <h3 class="sb-card__title sb-card__title--dark">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
              Categorías
            </h3>
            <ul class="sb-cats">
              {categorias.map((cat) => (
                <li class="sb-cat">
                  <a href={cat.href} class="sb-cat__link">
                    <span class="sb-cat__label">{cat.label}</span>
                    {cat.count && <span class="sb-cat__count">{cat.count}</span>}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        )}

        <!-- ARTÍCULOS POPULARES -->
        {articulosPopulares.length > 0 && (
          <div class="sb-card">
            <h3 class="sb-card__title sb-card__title--dark">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
              Artículos Populares
            </h3>
            <ul class="sb-links">
              {articulosPopulares.map((a) => (
                <li>
                  <a href={a.href} class="sb-link">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" aria-hidden="true"><path d="M9 18l6-6-6-6"/></svg>
                    {a.label}
                  </a>
                </li>
              ))}
            </ul>
            <a href="/blog" class="sb-see-all">Ver todos los artículos →</a>
          </div>
        )}

        <!-- PRODUCTOS RELACIONADOS -->
        {productosRelacionados.length > 0 && (
          <div class="sb-card">
            <h3 class="sb-card__title sb-card__title--dark">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/></svg>
              Productos Relacionados
            </h3>
            <ul class="sb-links">
              {productosRelacionados.map((p) => (
                <li>
                  <a href={p.href} class="sb-link">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" aria-hidden="true"><path d="M9 18l6-6-6-6"/></svg>
                    {p.label}
                  </a>
                </li>
              ))}
            </ul>
            <a href="/productos" class="sb-see-all">Ver catálogo completo →</a>
          </div>
        )}

        <!-- DIRECTORIO DE BOMBEROS -->
        {directorioLinks.length > 0 && (
          <div class="sb-card">
            <h3 class="sb-card__title sb-card__title--dark">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
              Directorio de Bomberos
            </h3>
            <ul class="sb-links">
              {directorioLinks.map((d) => (
                <li>
                  <a href={d.href} class="sb-link">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" aria-hidden="true"><path d="M9 18l6-6-6-6"/></svg>
                    {d.label}
                  </a>
                </li>
              ))}
            </ul>
            <a href="/directorio" class="sb-see-all">Ver directorio completo →</a>
          </div>
        )}

      </aside>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- ARTÍCULOS RELACIONADOS                                           -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  {relacionadosCdn.length > 0 && (
    <section class="blog-relacionados">
      <div class="container">
        <SectionHeader
          label="Sigue Leyendo"
          title="Artículos Relacionados"
          description="Contenido relevante para bomberos y brigadas industriales."
        />
        <div class="blog-rel__grid">
          {relacionadosCdn.map((r) => (
            <article class="blog-rel-card">
              <div class="blog-rel-card__img-wrap">
                <img
                  src={r.image}
                  alt={r.title}
                  loading="lazy"
                  width="400"
                  height="225"
                  class="blog-rel-card__img"
                />
                {r.categoria && <span class="blog-rel-card__badge">{r.categoria}</span>}
              </div>
              <div class="blog-rel-card__body">
                <h3 class="blog-rel-card__title">{r.title}</h3>
                <p class="blog-rel-card__excerpt">{r.excerpt}</p>
                <a href={r.href} class="blog-rel-card__btn">
                  Leer más
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" aria-hidden="true">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                  </svg>
                </a>
              </div>
            </article>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- CTA BANNER FINAL -->
  <CTABanner
    title="Explora Nuestro Catálogo Completo"
    btnText="Ver Productos"
    btnHref="/productos"
  />

</PageLayout>

<style>
  /* ══════════════════════════════════════════════════════════════════════
     HERO
     ══════════════════════════════════════════════════════════════════════ */
  .blog-hero {
    position: relative;
    display: flex;
    align-items: center;
    background: var(--color-smoke-950);
    overflow: hidden;
    padding: var(--space-16) 0;
  }

  .blog-hero__bg { position: absolute; inset: 0; pointer-events: none; }

  .blog-hero__gradient {
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse 80% 50% at 50% -20%, rgba(220, 38, 38, 0.15), transparent),
      radial-gradient(ellipse 60% 50% at 0%   50%, rgba(249, 115, 22, 0.10), transparent),
      radial-gradient(ellipse 60% 50% at 100% 80%, rgba(220, 38, 38, 0.08), transparent);
  }

  .blog-hero__grid {
    position: absolute;
    inset: 0;
    background-image:
      linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
    background-size: 60px 60px;
    mask-image: radial-gradient(ellipse at center, black 30%, transparent 70%);
  }

  .blog-hero__glow {
    position: absolute;
    width: 600px; height: 600px;
    border-radius: 50%;
    filter: blur(120px);
    opacity: 0.4;
  }

  .blog-hero__glow--1 { top: -200px; right: -100px; background: var(--color-ember-600); }
  .blog-hero__glow--2 { bottom: -200px; left: -100px; background: var(--color-fire-600); }

  .blog-hero__container {
    position: relative;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-12);
    align-items: center;
    padding-block: var(--space-8);
  }

  .blog-hero__content { color: var(--color-text-on-dark); }

  .blog-hero__badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-4);
    background: rgba(220, 38, 38, 0.15);
    border: 1px solid rgba(220, 38, 38, 0.3);
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    font-weight: 500;
    color: var(--color-fire-400);
    margin-bottom: var(--space-6);
  }

  .blog-hero__badge-dot {
    width: 8px; height: 8px;
    background: var(--color-ember-500);
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50%       { opacity: 0.6; transform: scale(0.85); }
  }

  .blog-hero__title {
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 800;
    line-height: var(--leading-tight);
    margin-bottom: var(--space-6);
    letter-spacing: var(--tracking-tight);
    color: #ffffff;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  .blog-hero__excerpt {
    font-size: var(--text-lg);
    color: var(--color-smoke-300);
    line-height: var(--leading-relaxed);
    max-width: 540px;
    margin-bottom: var(--space-6);
  }

  .blog-hero__tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
  }

  .blog-hero__tag {
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    font-weight: 600;
    color: var(--color-smoke-200);
    padding: 4px 12px;
  }

  .blog-hero__image-wrap {
    border-radius: var(--radius-2xl);
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0,0,0,0.4);
  }

  .blog-hero__image {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
    aspect-ratio: 16/9;
  }

  /* ══════════════════════════════════════════════════════════════════════
     LAYOUT PRINCIPAL CON SIDEBAR
     ══════════════════════════════════════════════════════════════════════ */
  .blog-layout {
    background: var(--color-smoke-50);
    padding: var(--space-12) 0 var(--space-16);
  }

  .blog-layout__inner {
    display: grid;
    grid-template-columns: minmax(0, 1fr) 340px;
    gap: var(--space-10);
    align-items: start;
  }

  .blog-main {
    display: flex;
    flex-direction: column;
    gap: var(--space-8);
  }

  /* ══════════════════════════════════════════════════════════════════════
     ARTÍCULO
     ══════════════════════════════════════════════════════════════════════ */
  .blog-article {
    background: white;
    border-radius: var(--radius-2xl);
    overflow: hidden;
    border: 1px solid var(--color-smoke-200);
    box-shadow: 0 4px 24px rgba(0,0,0,0.06);
  }

  .blog-article__content {
    padding: var(--space-10);
  }

  /* ── Prose styles para contenido Markdown ── */
  .prose {
    font-size: var(--text-base);
    color: var(--color-smoke-700);
    line-height: 1.8;
  }

  .prose :global(h2) {
    font-size: clamp(1.5rem, 2.5vw, 1.875rem);
    font-weight: 800;
    color: var(--color-smoke-900);
    margin: var(--space-10) 0 var(--space-4);
    line-height: 1.25;
  }

  .prose :global(h2:first-child) {
    margin-top: 0;
  }

  .prose :global(h3) {
    font-size: var(--text-xl);
    font-weight: 700;
    color: var(--color-smoke-800);
    margin: var(--space-8) 0 var(--space-3);
    line-height: 1.3;
  }

  .prose :global(h4) {
    font-size: var(--text-lg);
    font-weight: 700;
    color: var(--color-smoke-800);
    margin: var(--space-6) 0 var(--space-2);
  }

  .prose :global(p) {
    margin: 0 0 var(--space-5);
  }

  .prose :global(strong) {
    font-weight: 700;
    color: var(--color-smoke-900);
  }

  .prose :global(a) {
    color: var(--color-fire-600);
    text-decoration: underline;
    text-underline-offset: 2px;
    transition: color 0.15s;
  }

  .prose :global(a:hover) {
    color: var(--color-fire-800);
  }

  .prose :global(ul),
  .prose :global(ol) {
    margin: 0 0 var(--space-5);
    padding-left: var(--space-6);
  }

  .prose :global(li) {
    margin-bottom: var(--space-2);
  }

  .prose :global(blockquote) {
    border-left: 4px solid var(--color-fire-500);
    background: var(--color-smoke-50);
    padding: var(--space-4) var(--space-6);
    margin: var(--space-6) 0;
    border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
    font-style: italic;
    color: var(--color-smoke-600);
  }

  .prose :global(blockquote p) {
    margin: 0;
  }

  .prose :global(img) {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-xl);
    margin: var(--space-6) 0;
  }

  .prose :global(code) {
    background: var(--color-smoke-100);
    padding: 2px 6px;
    border-radius: var(--radius-md);
    font-size: 0.9em;
    font-family: ui-monospace, monospace;
  }

  .prose :global(pre) {
    background: var(--color-smoke-900);
    color: var(--color-smoke-100);
    padding: var(--space-5);
    border-radius: var(--radius-xl);
    overflow-x: auto;
    margin: var(--space-6) 0;
  }

  .prose :global(pre code) {
    background: transparent;
    padding: 0;
  }

  .prose :global(hr) {
    border: none;
    border-top: 1px solid var(--color-smoke-200);
    margin: var(--space-8) 0;
  }

  .prose :global(table) {
    width: 100%;
    border-collapse: collapse;
    margin: var(--space-6) 0;
    font-size: var(--text-sm);
  }

  .prose :global(th),
  .prose :global(td) {
    padding: var(--space-3) var(--space-4);
    text-align: left;
    border-bottom: 1px solid var(--color-smoke-200);
  }

  .prose :global(th) {
    background: var(--color-smoke-100);
    font-weight: 700;
    color: var(--color-smoke-800);
  }

  /* ── Footer del artículo ── */
  .blog-article__footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: var(--space-6);
    padding: var(--space-6) var(--space-10);
    background: var(--color-smoke-50);
    border-top: 1px solid var(--color-smoke-100);
  }

  .blog-article__autor {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }

  .blog-article__autor-avatar {
    width: 48px;
    height: 48px;
    background: rgba(220,38,38,0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-fire-600);
  }

  .blog-article__autor-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .blog-article__autor-name {
    font-size: var(--text-sm);
    font-weight: 700;
    color: var(--color-smoke-900);
    margin: 0;
  }

  .blog-article__autor-rol {
    font-size: var(--text-xs);
    color: var(--color-smoke-500);
    margin: 0;
  }

  .blog-article__tags {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    flex-wrap: wrap;
  }

  .blog-article__tags-label {
    font-size: var(--text-xs);
    font-weight: 600;
    color: var(--color-smoke-500);
  }

  .blog-article__tags-list {
    display: flex;
    gap: var(--space-2);
    flex-wrap: wrap;
  }

  .blog-article__tag {
    background: white;
    border: 1px solid var(--color-smoke-200);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    font-weight: 600;
    color: var(--color-smoke-600);
    padding: 4px 10px;
  }

  /* ── CTA Inline ── */
  .blog-cta-inline {
    display: flex;
    align-items: center;
    gap: var(--space-5);
    padding: var(--space-6);
    background: linear-gradient(135deg, var(--color-smoke-900) 0%, var(--color-smoke-800) 100%);
    border-radius: var(--radius-2xl);
  }

  .blog-cta-inline__icon {
    width: 56px;
    height: 56px;
    min-width: 56px;
    background: rgba(220,38,38,0.15);
    border-radius: var(--radius-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-fire-400);
  }

  .blog-cta-inline__content {
    flex: 1;
  }

  .blog-cta-inline__content h3 {
    font-size: var(--text-lg);
    font-weight: 800;
    color: white;
    margin: 0 0 var(--space-1);
  }

  .blog-cta-inline__content p {
    font-size: var(--text-sm);
    color: var(--color-smoke-400);
    margin: 0;
  }

  .blog-cta-inline__btn {
    display: inline-flex;
    align-items: center;
    padding: var(--space-3) var(--space-6);
    background: var(--color-fire-600);
    color: white;
    font-size: var(--text-sm);
    font-weight: 700;
    text-decoration: none;
    border-radius: var(--radius-lg);
    white-space: nowrap;
    transition: background 0.15s, transform 0.15s;
  }

  .blog-cta-inline__btn:hover {
    background: var(--color-fire-700);
    transform: translateY(-1px);
  }

  /* ══════════════════════════════════════════════════════════════════════
     SIDEBAR (reutilizando clases de ProductoLayout)
     ══════════════════════════════════════════════════════════════════════ */
  .blog-sidebar {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    position: sticky;
    top: 90px;
  }

  .sb-card {
    background: white;
    border: 1px solid var(--color-smoke-100);
    border-radius: var(--radius-2xl);
    padding: var(--space-5);
    box-shadow: 0 1px 4px rgba(0,0,0,0.04);
  }

  .sb-card--cta {
    background: linear-gradient(135deg, var(--color-fire-600) 0%, var(--color-ember-600) 100%);
    border-color: transparent;
  }

  .sb-card__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-base);
    font-weight: 800;
    color: white;
    margin: 0 0 var(--space-2);
    line-height: 1.3;
  }

  .sb-card__title--dark { color: var(--color-smoke-800); }
  .sb-card__title--dark svg { vertical-align: middle; color: var(--color-fire-500); }

  .sb-card__text {
    font-size: var(--text-sm);
    color: rgba(255,255,255,0.85);
    margin: 0 0 var(--space-4);
    line-height: 1.5;
  }

  .sb-cta-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    width: 100%;
    padding: var(--space-3) var(--space-4);
    background: white;
    color: var(--color-fire-700);
    font-size: var(--text-sm);
    font-weight: 800;
    text-decoration: none;
    border-radius: var(--radius-lg);
    transition: transform 0.15s, box-shadow 0.15s;
    margin-bottom: var(--space-4);
  }

  .sb-cta-btn:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }

  .sb-card__contacts {
    display: flex;
    gap: var(--space-3);
    justify-content: center;
  }

  .sb-contact {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    font-weight: 600;
    color: rgba(255,255,255,0.75);
    text-decoration: none;
  }

  .sb-contact--wa { color: #86efac; }

  /* ── Categorías ── */
  .sb-cats {
    list-style: none;
    padding: 0;
    margin: var(--space-3) 0 0;
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  .sb-cat { display: block; }

  .sb-cat__link {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-2) var(--space-2);
    font-size: var(--text-sm);
    font-weight: 500;
    color: var(--color-smoke-700);
    text-decoration: none;
    border-radius: var(--radius-md);
  }

  .sb-cat__count {
    font-size: var(--text-xs);
    font-weight: 700;
    color: var(--color-smoke-400);
    background: var(--color-smoke-100);
    padding: 2px 8px;
    border-radius: var(--radius-full);
  }

  /* ── Links ── */
  .sb-links {
    list-style: none;
    padding: 0;
    margin: var(--space-3) 0 var(--space-3);
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }

  .sb-link {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-xs);
    font-weight: 500;
    color: var(--color-smoke-700);
    text-decoration: none;
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-md);
  }

  .sb-link svg { color: var(--color-smoke-400); flex-shrink: 0; }

  .sb-see-all {
    display: block;
    font-size: var(--text-xs);
    font-weight: 700;
    color: var(--color-fire-600);
    text-decoration: none;
    text-align: right;
    padding-top: var(--space-1);
    border-top: 1px solid var(--color-smoke-100);
  }

  /* ══════════════════════════════════════════════════════════════════════
     ARTÍCULOS RELACIONADOS
     ══════════════════════════════════════════════════════════════════════ */
  .blog-relacionados {
    padding: var(--space-20) 0;
    background: white;
  }

  .blog-rel__grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-6);
    margin-top: var(--space-10);
  }

  .blog-rel-card {
    background: var(--color-smoke-50);
    border-radius: var(--radius-2xl);
    overflow: hidden;
    border: 1px solid var(--color-smoke-100);
  }

  .blog-rel-card__img-wrap {
    position: relative;
    aspect-ratio: 16/9;
    overflow: hidden;
  }

  .blog-rel-card__img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .blog-rel-card__badge {
    position: absolute;
    top: var(--space-3);
    left: var(--space-3);
    background: var(--color-fire-600);
    color: white;
    font-size: var(--text-xs);
    font-weight: 700;
    padding: 4px 10px;
    border-radius: var(--radius-full);
  }

  .blog-rel-card__body {
    padding: var(--space-5);
  }

  .blog-rel-card__title {
    font-size: var(--text-lg);
    font-weight: 800;
    color: var(--color-smoke-900);
    margin: 0 0 var(--space-2);
    line-height: 1.3;
  }

  .blog-rel-card__excerpt {
    font-size: var(--text-sm);
    color: var(--color-smoke-600);
    margin: 0 0 var(--space-4);
    line-height: 1.6;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .blog-rel-card__btn {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: 700;
    color: var(--color-fire-600);
    text-decoration: none;
  }

  /* ══════════════════════════════════════════════════════════════════════
     RESPONSIVE
     ══════════════════════════════════════════════════════════════════════ */
  @media (max-width: 1024px) {
    .blog-hero__container {
      grid-template-columns: 1fr;
      gap: var(--space-8);
    }

    .blog-hero__image-wrap {
      max-width: 600px;
    }

    .blog-layout__inner {
      grid-template-columns: 1fr;
    }

    .blog-sidebar {
      position: static;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-4);
    }

    .blog-sidebar .sb-card--cta {
      grid-column: span 2;
    }

    .blog-rel__grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 768px) {
    .blog-hero {
      padding: var(--space-10) 0;
    }

    .blog-hero__title {
      font-size: clamp(1.75rem, 5vw, 2.5rem);
    }

    .blog-hero__excerpt {
      font-size: var(--text-base);
    }

    .blog-article__content {
      padding: var(--space-6);
    }

    .blog-article__footer {
      padding: var(--space-4) var(--space-6);
      flex-direction: column;
      align-items: flex-start;
    }

    .blog-cta-inline {
      flex-direction: column;
      text-align: center;
      gap: var(--space-4);
    }

    .blog-cta-inline__btn {
      width: 100%;
      justify-content: center;
    }

    .blog-sidebar {
      grid-template-columns: 1fr;
    }

    .blog-sidebar .sb-card--cta {
      grid-column: span 1;
    }

    .blog-rel__grid {
      grid-template-columns: 1fr;
    }

    .prose :global(h2) {
      font-size: var(--text-xl);
    }

    .prose :global(h3) {
      font-size: var(--text-lg);
    }
  }
</style>
